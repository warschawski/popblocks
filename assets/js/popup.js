(()=>{function v(t){return typeof t}function C(t){return Object.prototype.toString.call(t)}function R(t){return se(t)||t===!1||t===null}function P(t){return v(t)==="function"}function T(t){return v(t)==="object"}function se(t){return v(t)==="undefined"}function g(...t){let e={},l=!1,o=0;v(t[0])==="boolean"&&(l=t[0],o++);let s=n=>{for(let f in n)Object.hasOwn(n,f)&&(l&&C(n[f])==="[object Object]"?e[f]=g(e[f],n[f]):e[f]=n[f])};for(;o<t.length;o++)s(t[o]);return e}function k(t,e){return(e||document).querySelectorAll(t)}function B(t){return[...t.parentElement.children].filter(e=>e!=t)}function ne(t){return["[object NodeList]","[object Array]"].includes(C(t))||(t=[t]),[...t].filter(e=>!R(e))}function p(t,e){ne(t).forEach(e)}function x(t,e,l,o){p(t,s=>{s.addEventListener(e,l,o||null)})}function z(t,e,l,o){x(t,e,l,g({once:!0,capture:o===!0},T(o)?o:{}))}function A(t,e,l){p(t,o=>{o.removeEventListener(e,l)})}function S(t,e,l){p(t,o=>{o.dispatchEvent(new CustomEvent(e,{detail:l||null}))})}function N(...t){return C(t[0])==="[object Array]"&&(t=t[0]),t=t.filter(e=>e!==""),t}function F(t,e){return t.classList.contains(e)}function j(t,...e){e=N(...e),p(t,l=>{l.classList.add(...e)})}function H(t,...e){e=N(...e),p(t,l=>{l.classList.remove(...e)})}function ae(t,e){return t.getAttribute(e)}function ce(t,e){if(C(t)!=="[object Object]"){let l={};l[`${t}`]=e,t=l}return Object.entries(t)}function $(t,e,l){e=ce(e,l),p(t,o=>{for(let[s,n]of e)R(n)?ue(t,s):o.setAttribute(s,n)})}function ue(t,e){C(e)!=="[object Array]"&&(e=[e]),p(t,l=>{p(e,o=>{l.removeAttribute(o)})})}function J(t,e,l,o){let s=V([o,e].join("-"));p(t,n=>{n.dataset[s]=ae(n,e)||"",$(n,e,l)})}function U(t,e,l){let o=V([l,e].join("-"));p(t,s=>{$(s,e,s.dataset[o]||!1),delete s.dataset[o]})}function V(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,l)=>l.toUpperCase())}var O,_=class t{static#e=1;static#t={customClass:"",returnFocus:!0,templates:{container:`
<div class="popblocks-modal" role="dialog" aria-modal="true">
  <div class="popblocks-modal-overlay"></div>
  <div class="popblocks-modal-container">
    <div class="popblocks-modal-wrap">
      <button type="button" class="popblocks-modal-close" aria-label="Close">[close]</button>
      <div class="popblocks-modal-frame"></div>
    </div>
  </div>
</div>`,close:'<span class="popblocks-modal-sr">Close</span><svg viewBox="-6 -6 24 24" fill="currentColor"><path d="M7.314 5.9l3.535-3.536A1 1 0 1 0 9.435.95L5.899 4.485 2.364.95A1 1 0 1 0 .95 2.364l3.535 3.535L.95 9.435a1 1 0 1 0 1.414 1.414l3.535-3.535 3.536 3.535a1 1 0 1 0 1.414-1.414L7.314 5.899z"></path></svg>'}};static defaults(e){this.#t=g(!0,this.#t,e)}static construct(e,l){let o=k(e);return p(o,s=>{s.Modal||new t(s,l)}),o}constructor(e,l){if(e.Modal){console.warn("Modal: Instance already exists",e);return}let o={},s=e.dataset;try{o=JSON.parse(s.popblocksOptions||"{}")}catch{console.warn("Modal: Error parsing options JSON",e)}Object.assign(this,g(!0,this.constructor.#t,l||{},o)),this.el=e,this.guid=this.constructor.#e++,this.guidClass=`popblocks-modal-element-${this.guid}`,this.isOpen=!1,j(this.el,this.guidClass),x(this.el,"click",this.#o),e.Modal=this}destroy(){this.close(),H(this.el,this.guidClass),A(this.el,"click",this.#o),this.el.Modal=null,delete this.el.Modal}open(){if(this.isOpen)return;let e;O?e=O.close():e=new Promise((l,o)=>{l(this.el)}),e.then(()=>{this.hash=this.el.hash,this.targetEl=k(this.hash)[0],this.targetEl&&(this.listeners={close:this.#a(),container:this.#s(),keydown:this.#c()},this.#l(),this.#i(),setTimeout(()=>{j(this.modalEl,"popblocks-modal-open"),this.isOpen=!0,this.closeEl.focus(),O=this,S(window,"modal:open",{el:this.el})},10))})}close(){return this.isOpen?(H(this.modalEl,"popblocks-modal-open"),this.#r(),A(window,"keydown",this.listeners.keydown),A(window,"modal:close",this.listeners.close),new Promise((l,o)=>{let s=n=>{F(n.target,"popblocks-modal")&&(this.targetEl.append(...this.frameEl.childNodes),A(this.modalEl,"transitionend",s),this.modalEl.remove(),this.isOpen=!1,this.returnFocus&&this.el.focus(),S(window,"modal:close",{el:this.el}),O=null,l(this.el))};x(this.modalEl,"transitionend",s)})):void 0}#l(){let e=this.templates.container.replace("[close]",this.templates.close);document.body.insertAdjacentHTML("beforeend",e),this.modalEl=k(".popblocks-modal")[0],this.overlayEl=k(".popblocks-modal-overlay",this.modalEl)[0],this.closeEl=k(".popblocks-modal-close",this.modalEl)[0],this.containerEl=k(".popblocks-modal-container",this.modalEl)[0],this.wrapEl=k(".popblocks-modal-wrap",this.modalEl)[0],this.frameEl=k(".popblocks-modal-frame",this.modalEl)[0],this.frameEl.append(...this.targetEl.childNodes),this.wrapEl.append(this.frameEl),j(this.modalEl,this.customClass),z(this.closeEl,"click",this.listeners.close),x(this.containerEl,"click",this.listeners.container),x(window,"keydown",this.listeners.keydown),x(window,"modal:close",this.listeners.close)}#i(){J(B(this.modalEl),"aria-hidden","true","modal")}#r(){U(B(this.modalEl),"aria-hidden","modal")}#o(e){e.preventDefault(),e.stopPropagation(),this.Modal.open()}#s(){return e=>{e.target!==this.frameEl&&!this.frameEl.contains(e.target)?this.close():this.#n(e)}}#n(e){F(e.target,"popblocks-modal-trigger-close")&&this.close()}#a(){return e=>{this.close()}}#c(){return e=>{e.key==="Escape"&&this.close()}}},D=_;function W(t,e){typeof jQuery<"u"&&(jQuery.fn[e.toLowerCase()]=function(l,...o){return jQuery(this).each((s,n)=>{!l||T(l)?new t(n,l):n[e]&&P(n[e][l])&&n[e][l](...o)})})}function I(t,e){typeof jQuery<"u"&&(jQuery[e.toLowerCase()]=function(l,...o){if(P(t[l]))return t[l](...o)})}W(D,"Modal");I(D,"Modal");var Q=class{static#e={domain:null,expires:6048e5,path:null,samesite:"Lax",secure:null};static defaults(e){this.#e=g(!0,this.#e,e)}static set(e,l,o){let s=!1,n=new Date;o=g(!0,this.#e,o||{}),v(o.expires)==="number"&&(n.setTime(n.getTime()+o.expires),s=n.toGMTString());let f=o.domain?"; domain="+o.domain:"",y=s?"; expires="+s:"",w=s?"; max-age="+o.expires/1e3:"",b=o.path?"; path="+o.path:"",E=o.samesite?"; samesite="+o.samesite:"",h=o.secure?"; secure":"";document.cookie=`${e}=${l}${y}${w}${f}${b}${E}${h}`}static get(e){let l=`${e}=`,o=document.cookie.split(";");for(var s=0;s<o.length;s++){let n=o[s].trim();if(n.indexOf(l)===0)return n.substring(l.length,n.length)}return null}static delete(e,l){this.set(e,"",g({},l,{expires:-6048e5}))}},Y=Q;I(Y,"Cookie");(function(t,e){let l=navigator.language.split("-")[0],o=[];function s(){console.log(o),o.length>0&&PopBlocks.open(o.shift())}e.PopBlocks={open:function(i){t(".popblocks-modal").length==0?t('.popblocks-trigger[data-popblocks-id="'+i+'"]').modal("open"):o.push(i),console.log(o)},close:function(){t(".popblocks-trigger").modal("close")}};let n=0,f=[],y=[],w=!1,b=[];function E(i,r){return r==="element_class"?i="."+i:r==="element_id"&&(i="#"+i),t(i)}function h(i){let r=t(`[data-popblocks-id="${i}"]`).data("popblocks-data");if(r.options.active){let u=r.options.name;if(t.cookie("get",u))return!1}let d=!1;for(group of r.behaviors){let u=!0;for(rule of group.rules){let c=!1;if(rule.type==="browser_language")rule.operator==="equals"?c=l.toLowerCase()===rule.value.toLowerCase():c=l.toLowerCase()!==rule.value.toLowerCase();else if(rule.type==="url"){let m=e.location.href;rule.operator==="contains"?c=m.includes(rule.value.toLowerCase()):c=!m.includes(rule.value.toLowerCase())}else c=!0;if(!c){u=!1;break}}if(u){d=!0;break}}return d}function G(i,r){let a=parseInt(r.rules[0].value,10);setTimeout(function(){h(i)&&PopBlocks.open(i)},a*1e3)}function K(i,r){let a=0,d=r.rules[0].value,u,c=function(L){a=0};t(document).ready(function(){t(this).on(`mousemove.${i} keypress.${i}`,c),u=setInterval(m,1e3)});function m(){a++,a>d&&(h(i)&&PopBlocks.open(i),t(this).off(`mousemove.${i} keypress.${i}`,c),clearInterval(u))}}function Z(i,r){let a=t(e),d=t("body"),u;b.push({id:i,opened:!1}),w||(d.on("mouseleave.popblocks",c=>{u=c.clientY,u<0&&a.trigger("exitintent.popblocks")}),a.on("exitintent.popblocks",()=>{X()}),w=!0)}function X(){t.each(b,(i,r)=>{if(!r.opened&&(b[i].opened=!0,h(r.id)))return PopBlocks.open(r.id),!1})}function ee(i,r){let a=r.rules[0].value.trim(),d=r.rules[0].operator;E(a,d).on(`click.${i}`,c=>{h(i)&&PopBlocks.open(i)})}function te(i,r){let a=r.rules[0].value.trim(),d=r.rules[0].operator;E(a,d).on(`mouseover.${i}`,c=>{h(i)&&PopBlocks.open(i)})}function oe(i,r){y.push({id:i,selector:r.rules[0].value.trim(),operator:r.rules[0].operator,opened:!1}),e.requestAnimationFrame(M)}function le(i,r){f.push({id:i,percent:parseInt(r.rules[0].value,10),opened:!1}),e.requestAnimationFrame(M)}function M(){let i=!1;t.each(f,(r,a)=>{!a.opened&&n>=a.percent?(f[r].opened=!0,h(a.id)&&PopBlocks.open(a.id)):i=!0}),t.each(y,(r,a)=>{if(a.opened)i=!0;else{let d=E(a.selector,a.operator);ie(d[0])?(y[r].opened=!0,h(a.id)&&PopBlocks.open(a.id)):i=!0}}),i&&e.requestAnimationFrame(M)}function ie(i){let r=i.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(e.innerHeight||document.documentElement.clientHeight)&&r.right<=(e.innerWidth||document.documentElement.clientWidth)}function re(i,r){return i*({months:730,weeks:168,days:24,hours:1}[r]||1)}t(document).ready(function(){let i={page_load:G,idle_time:K,exit_intent:Z,click:ee,hover:te,element_visibility:oe,scroll:le},r=t(".popblocks-trigger");r.modal({returnFocus:!1}),r.each((d,u)=>{let c=t(u),m=c.data("popblocks-id"),L=c.data("popblocks-data");a(m,L.triggers)});function a(d,u){t.each(u,(c,m)=>{let L=m.rules?.[0]?.type,q=i[L];q&&q(d,m)})}}),t(e).on("scroll",function(){let i=t(e).scrollTop(),r=t(document).height()-e.innerHeight;n=i/r*100}),t(e).on("modal:open",i=>{let r=t(i.originalEvent.detail.el).data("popblocks-data");if(r.options.active){let d=r.options.name,u=r.options.duration,c=re(u.value,u.unit);t.cookie("set",d,!0,{path:"/",expires:1e3*60*60*c})}}),t(e).on("modal:close",i=>{setTimeout(function(){s()},0)})})(jQuery,window);})();
//# sourceMappingURL=popup.js.map
