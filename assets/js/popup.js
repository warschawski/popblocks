(()=>{function p(e){return typeof e}function u(e){return Object.prototype.toString.call(e)}function O(e){return B(e)||e===!1||e===null}function w(e){return p(e)==="function"}function y(e){return p(e)==="object"}function B(e){return p(e)==="undefined"}function f(...e){let t={},o=!1,i=0;p(e[0])==="boolean"&&(o=e[0],i++);let s=r=>{for(let l in r)Object.hasOwn(r,l)&&(o&&u(r[l])==="[object Object]"?t[l]=f(t[l],r[l]):t[l]=r[l])};for(;i<e.length;i++)s(e[i]);return t}function a(e,t){return(t||document).querySelectorAll(e)}function x(e){return[...e.parentElement.children].filter(t=>t!=e)}function I(e){return["[object NodeList]","[object Array]"].includes(u(e))||(e=[e]),[...e].filter(t=>!O(t))}function n(e,t){I(e).forEach(t)}function c(e,t,o,i){n(e,s=>{s.addEventListener(t,o,i||null)})}function L(e,t,o,i){c(e,t,o,f({once:!0,capture:i===!0},y(i)?i:{}))}function h(e,t,o){n(e,i=>{i.removeEventListener(t,o)})}function b(e,t,o){n(e,i=>{i.dispatchEvent(new CustomEvent(t,{detail:o||null}))})}function M(...e){return u(e[0])==="[object Array]"&&(e=e[0]),e=e.filter(t=>t!==""),e}function v(e,t){return e.classList.contains(t)}function m(e,...t){t=M(...t),n(e,o=>{o.classList.add(...t)})}function C(e,...t){t=M(...t),n(e,o=>{o.classList.remove(...t)})}function T(e,t){return e.getAttribute(t)}function _(e,t){if(u(e)!=="[object Object]"){let o={};o[`${e}`]=t,e=o}return Object.entries(e)}function S(e,t,o){t=_(t,o),n(e,i=>{for(let[s,r]of t)O(r)?J(e,s):i.setAttribute(s,r)})}function J(e,t){u(t)!=="[object Array]"&&(t=[t]),n(e,o=>{n(t,i=>{o.removeAttribute(i)})})}function P(e,t,o,i){let s=F([i,t].join("-"));n(e,r=>{r.dataset[s]=T(r,t)||"",S(r,t,o)})}function Q(e,t,o){let i=F([o,t].join("-"));n(e,s=>{S(s,t,s.dataset[i]||!1),delete s.dataset[i]})}function F(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(t,o)=>o.toUpperCase())}var g,k=class e{static#o=1;static#t={customClass:"",returnFocus:!0,templates:{container:`
<div class="popblocks-modal" role="dialog" aria-modal="true">
  <div class="popblocks-modal-overlay"></div>
  <div class="popblocks-modal-container">
    <div class="popblocks-modal-wrap">
      <button type="button" class="popblocks-modal-close" aria-label="Close">[close]</button>
      <div class="popblocks-modal-frame"></div>
    </div>
  </div>
</div>`,close:'<span class="popblocks-modal-sr">Close</span><svg viewBox="-6 -6 24 24" fill="currentColor"><path d="M7.314 5.9l3.535-3.536A1 1 0 1 0 9.435.95L5.899 4.485 2.364.95A1 1 0 1 0 .95 2.364l3.535 3.535L.95 9.435a1 1 0 1 0 1.414 1.414l3.535-3.535 3.536 3.535a1 1 0 1 0 1.414-1.414L7.314 5.899z"></path></svg>'}};static defaults(t){this.#t=f(!0,this.#t,t)}static construct(t,o){let i=a(t);return n(i,s=>{s.Modal||new e(s,o)}),i}constructor(t,o){if(t.Modal){console.warn("Modal: Instance already exists",t);return}let i={},s=t.dataset;try{i=JSON.parse(s.popblocksOptions||"{}")}catch{console.warn("Modal: Error parsing options JSON",t)}Object.assign(this,f(!0,this.constructor.#t,o||{},i)),this.el=t,this.guid=this.constructor.#o++,this.guidClass=`popblocks-modal-element-${this.guid}`,this.isOpen=!1,m(this.el,this.guidClass),c(this.el,"click",this.#e),t.Modal=this}destroy(){this.close(),C(this.el,this.guidClass),h(this.el,"click",this.#e),this.el.Modal=null,delete this.el.Modal}open(){if(this.isOpen)return;let t;g?t=g.close():t=new Promise((o,i)=>{o(this.el)}),t.then(()=>{this.hash=this.el.hash,this.targetEl=a(this.hash)[0],this.targetEl&&(this.listeners={close:this.#a(),container:this.#l(),keydown:this.#c()},this.#i(),this.#s(),setTimeout(()=>{m(this.modalEl,"popblocks-modal-open"),this.isOpen=!0,this.closeEl.focus(),g=this,b(window,"modal:open",{el:this.el})},10))})}close(){return this.isOpen?(C(this.modalEl,"popblocks-modal-open"),this.#r(),h(window,"keydown",this.listeners.keydown),h(window,"modal:close",this.listeners.close),new Promise((o,i)=>{let s=r=>{v(r.target,"popblocks-modal")&&(this.targetEl.append(...this.frameEl.childNodes),h(this.modalEl,"transitionend",s),this.modalEl.remove(),this.isOpen=!1,this.returnFocus&&this.el.focus(),b(window,"modal:close",{el:this.el}),g=null,o(this.el))};c(this.modalEl,"transitionend",s)})):void 0}#i(){let t=this.templates.container.replace("[close]",this.templates.close);document.body.insertAdjacentHTML("beforeend",t),this.modalEl=a(".popblocks-modal")[0],this.overlayEl=a(".popblocks-modal-overlay",this.modalEl)[0],this.closeEl=a(".popblocks-modal-close",this.modalEl)[0],this.containerEl=a(".popblocks-modal-container",this.modalEl)[0],this.wrapEl=a(".popblocks-modal-wrap",this.modalEl)[0],this.frameEl=a(".popblocks-modal-frame",this.modalEl)[0],this.frameEl.append(...this.targetEl.childNodes),this.wrapEl.append(this.frameEl),m(this.modalEl,this.customClass),L(this.closeEl,"click",this.listeners.close),c(this.containerEl,"click",this.listeners.container),c(window,"keydown",this.listeners.keydown),c(window,"modal:close",this.listeners.close)}#s(){P(x(this.modalEl),"aria-hidden","true","modal")}#r(){Q(x(this.modalEl),"aria-hidden","modal")}#e(t){t.preventDefault(),t.stopPropagation(),this.Modal.open()}#l(){return t=>{t.target!==this.frameEl&&!this.frameEl.contains(t.target)?this.close():this.#n(t)}}#n(t){v(t.target,"popblocks-modal-trigger-close")&&this.close()}#a(){return t=>{this.close()}}#c(){return t=>{t.key==="Escape"&&this.close()}}},A=k;function z(e,t){typeof jQuery<"u"&&(jQuery.fn[t.toLowerCase()]=function(o,...i){return jQuery(this).each((s,r)=>{!o||y(o)?new e(r,o):r[t]&&w(r[t][o])&&r[t][o](...i)})})}function D(e,t){typeof jQuery<"u"&&(jQuery[t.toLowerCase()]=function(o,...i){if(w(e[o]))return e[o](...i)})}z(A,"Modal");D(A,"Modal");(function(e,t){t.PopBlocks={open:function(i){e('.popblocks-trigger[data-popblocks-id="'+i+'"]').modal("open")},close:function(){e(".popblocks-trigger").modal("close")}};function o(i,s,r,l){let d=parseInt(l.rules[0].value,10);console.log("Page Load: ",l.rules[0].value,d),setTimeout(function(){PopBlocks.open(s)},d*1e3)}e(document).ready(function(){let i=e(".popblocks-trigger");i.modal({returnFocus:!1}),i.each((s,r)=>{let l=e(r),d=l.data("popblocks-id"),E=l.data("popblocks-data");console.log(d,E),e.each(E.triggerGroups,(N,j)=>{j.rules[0].type=="page_load"&&o(l,d,E,j)})})})})(jQuery,window);})();
//# sourceMappingURL=popup.js.map
