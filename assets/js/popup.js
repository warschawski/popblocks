(()=>{function p(e){return typeof e}function u(e){return Object.prototype.toString.call(e)}function j(e){return B(e)||e===!1||e===null}function E(e){return p(e)==="function"}function y(e){return p(e)==="object"}function B(e){return p(e)==="undefined"}function f(...e){let t={},o=!1,i=0;p(e[0])==="boolean"&&(o=e[0],i++);let s=n=>{for(let l in n)Object.hasOwn(n,l)&&(o&&u(n[l])==="[object Object]"?t[l]=f(t[l],n[l]):t[l]=n[l])};for(;i<e.length;i++)s(e[i]);return t}function a(e,t){return(t||document).querySelectorAll(e)}function x(e){return[...e.parentElement.children].filter(t=>t!=e)}function T(e){return["[object NodeList]","[object Array]"].includes(u(e))||(e=[e]),[...e].filter(t=>!j(t))}function r(e,t){T(e).forEach(t)}function d(e,t,o,i){r(e,s=>{s.addEventListener(t,o,i||null)})}function O(e,t,o,i){d(e,t,o,f({once:!0,capture:i===!0},y(i)?i:{}))}function h(e,t,o){r(e,i=>{i.removeEventListener(t,o)})}function w(e,t,o){r(e,i=>{i.dispatchEvent(new CustomEvent(t,{detail:o||null}))})}function L(...e){return u(e[0])==="[object Array]"&&(e=e[0]),e=e.filter(t=>t!==""),e}function b(e,t){return e.classList.contains(t)}function m(e,...t){t=L(...t),r(e,o=>{o.classList.add(...t)})}function v(e,...t){t=L(...t),r(e,o=>{o.classList.remove(...t)})}function _(e,t){return e.getAttribute(t)}function F(e,t){if(u(e)!=="[object Object]"){let o={};o[`${e}`]=t,e=o}return Object.entries(e)}function M(e,t,o){t=F(t,o),r(e,i=>{for(let[s,n]of t)j(n)?I(e,s):i.setAttribute(s,n)})}function I(e,t){u(t)!=="[object Array]"&&(t=[t]),r(e,o=>{r(t,i=>{o.removeAttribute(i)})})}function S(e,t,o,i){let s=z([i,t].join("-"));r(e,n=>{n.dataset[s]=_(n,t)||"",M(n,t,o)})}function Q(e,t,o){let i=z([o,t].join("-"));r(e,s=>{M(s,t,s.dataset[i]||!1),delete s.dataset[i]})}function z(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(t,o)=>o.toUpperCase())}var C=class e{static#o=1;static#t={customClass:"",templates:{container:`
<div class="popblocks-modal" role="dialog" aria-modal="true">
  <div class="popblocks-modal-overlay"></div>
  <div class="popblocks-modal-container">
    <div class="popblocks-modal-wrap">
      <button type="button" class="popblocks-modal-close" aria-label="Close">[close]</button>
      <div class="popblocks-modal-frame"></div>
    </div>
  </div>
</div>`,close:'<span class="popblocks-modal-sr">Close</span><svg viewBox="-6 -6 24 24" fill="currentColor"><path d="M7.314 5.9l3.535-3.536A1 1 0 1 0 9.435.95L5.899 4.485 2.364.95A1 1 0 1 0 .95 2.364l3.535 3.535L.95 9.435a1 1 0 1 0 1.414 1.414l3.535-3.535 3.536 3.535a1 1 0 1 0 1.414-1.414L7.314 5.899z"></path></svg>'}};static defaults(t){this.#t=f(!0,this.#t,t)}static construct(t,o){let i=a(t);return r(i,s=>{s.Modal||new e(s,o)}),i}constructor(t,o){if(t.Modal){console.warn("Modal: Instance already exists",t);return}let i={},s=t.dataset;try{i=JSON.parse(s.modalOptions||"{}")}catch{console.warn("Modal: Error parsing options JSON",t)}Object.assign(this,f(!0,this.constructor.#t,o||{},i)),this.el=t,this.guid=this.constructor.#o++,this.guidClass=`popblocks-modal-element-${this.guid}`,this.isOpen=!1,m(this.el,this.guidClass),d(this.el,"click",this.#e),t.Modal=this}destroy(){this.close(),v(this.el,this.guidClass),h(this.el,"click",this.#e),this.el.Modal=null,delete this.el.Modal}open(){this.isOpen||(this.hash=this.el.hash,this.targetEl=a(this.hash)[0],this.targetEl&&(this.listeners={close:this.#a(),container:this.#l(),keydown:this.#d()},this.#i(),this.#s(),setTimeout(()=>{m(this.modalEl,"popblocks-modal-open"),this.isOpen=!0,this.closeEl.focus(),w(window,"modal:open",{el:this.el})},10)))}close(){if(!this.isOpen)return;v(this.modalEl,"popblocks-modal-open"),this.#n(),h(window,"keydown",this.listeners.keydown),h(window,"modal:close",this.listeners.close);let t=o=>{b(o.target,"popblocks-modal")&&(this.targetEl.append(...this.frameEl.childNodes),h(this.modalEl,"transitionend",t),this.modalEl.remove(),this.isOpen=!1,this.el.focus(),w(window,"modal:close",{el:this.el}))};d(this.modalEl,"transitionend",t)}#i(){let t=this.templates.container.replace("[close]",this.templates.close);document.body.insertAdjacentHTML("beforeend",t),this.modalEl=a(".popblocks-modal")[0],this.overlayEl=a(".popblocks-modal-overlay",this.modalEl)[0],this.closeEl=a(".popblocks-modal-close",this.modalEl)[0],this.containerEl=a(".popblocks-modal-container",this.modalEl)[0],this.wrapEl=a(".popblocks-modal-wrap",this.modalEl)[0],this.frameEl=a(".popblocks-modal-frame",this.modalEl)[0],this.frameEl.append(...this.targetEl.childNodes),this.wrapEl.append(this.frameEl),m(this.modalEl,this.customClass),O(this.closeEl,"click",this.listeners.close),d(this.containerEl,"click",this.listeners.container),d(window,"keydown",this.listeners.keydown),d(window,"modal:close",this.listeners.close)}#s(){S(x(this.modalEl),"aria-hidden","true","modal")}#n(){Q(x(this.modalEl),"aria-hidden","modal")}#e(t){t.preventDefault(),t.stopPropagation(),this.Modal.open()}#l(){return t=>{t.target!==this.frameEl&&!this.frameEl.contains(t.target)?this.close():this.#r(t)}}#r(t){b(t.target,"popblocks-modal-trigger-close")&&this.close()}#a(){return t=>{this.close()}}#d(){return t=>{t.key==="Escape"&&this.close()}}},k=C;function D(e,t){typeof jQuery<"u"&&(jQuery.fn[t.toLowerCase()]=function(o,...i){return jQuery(this).each((s,n)=>{!o||y(o)?new e(n,o):n[t]&&E(n[t][o])&&n[t][o](...i)})})}function P(e,t){typeof jQuery<"u"&&(jQuery[t.toLowerCase()]=function(o,...i){if(E(e[o]))return e[o](...i)})}D(k,"Modal");P(k,"Modal");(function(e,t){t.PopBlocks={open:function(i){e('.popblocks-trigger[data-popblocks-id="'+i+'"]').modal("open")},close:function(){e(".popblocks-trigger").modal("close")}};function o(i,s,n,l){let c=parseInt(l.rules[0].value,10);console.log("Page Load: ",l.rules[0].value,c),setTimeout(function(){PopBlocks.open(s)},c*1e3)}e(document).ready(function(){let i=e(".popblocks-trigger");i.modal({}),i.each((s,n)=>{let l=e(n),c=l.data("popblocks-id"),g=l.data("popblocks-data");console.log(c,g),e.each(g.triggerGroups,(J,A)=>{A.rules[0].type=="page_load"&&o(l,c,g,A)})})})})(jQuery,window);})();
//# sourceMappingURL=popup.js.map
