(()=>{function x(e){return typeof e}function m(e){return Object.prototype.toString.call(e)}function M(e){return D(e)||e===!1||e===null}function w(e){return x(e)==="function"}function b(e){return x(e)==="object"}function D(e){return x(e)==="undefined"}function y(...e){let t={},o=!1,i=0;x(e[0])==="boolean"&&(o=e[0],i++);let s=n=>{for(let l in n)Object.hasOwn(n,l)&&(o&&m(n[l])==="[object Object]"?t[l]=y(t[l],n[l]):t[l]=n[l])};for(;i<e.length;i++)s(e[i]);return t}function u(e,t){return(t||document).querySelectorAll(e)}function v(e){return[...e.parentElement.children].filter(t=>t!=e)}function F(e){return["[object NodeList]","[object Array]"].includes(m(e))||(e=[e]),[...e].filter(t=>!M(t))}function a(e,t){F(e).forEach(t)}function f(e,t,o,i){a(e,s=>{s.addEventListener(t,o,i||null)})}function I(e,t,o,i){f(e,t,o,y({once:!0,capture:i===!0},b(i)?i:{}))}function g(e,t,o){a(e,i=>{i.removeEventListener(t,o)})}function k(e,t,o){a(e,i=>{i.dispatchEvent(new CustomEvent(t,{detail:o||null}))})}function S(...e){return m(e[0])==="[object Array]"&&(e=e[0]),e=e.filter(t=>t!==""),e}function C(e,t){return e.classList.contains(t)}function E(e,...t){t=S(...t),a(e,o=>{o.classList.add(...t)})}function A(e,...t){t=S(...t),a(e,o=>{o.classList.remove(...t)})}function J(e,t){return e.getAttribute(t)}function N(e,t){if(m(e)!=="[object Object]"){let o={};o[`${e}`]=t,e=o}return Object.entries(e)}function P(e,t,o){t=N(t,o),a(e,i=>{for(let[s,n]of t)M(n)?U(e,s):i.setAttribute(s,n)})}function U(e,t){m(t)!=="[object Array]"&&(t=[t]),a(e,o=>{a(t,i=>{o.removeAttribute(i)})})}function Q(e,t,o,i){let s=B([i,t].join("-"));a(e,n=>{n.dataset[s]=J(n,t)||"",P(n,t,o)})}function T(e,t,o){let i=B([o,t].join("-"));a(e,s=>{P(s,t,s.dataset[i]||!1),delete s.dataset[i]})}function B(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(t,o)=>o.toUpperCase())}var j=class e{static#o=1;static#t={customClass:"",templates:{container:`
<div class="popblocks-modal" role="dialog" aria-modal="true">
  <div class="popblocks-modal-overlay"></div>
  <div class="popblocks-modal-container">
    <div class="popblocks-modal-wrap">
      <button type="button" class="popblocks-modal-close" aria-label="Close">[close]</button>
      <div class="popblocks-modal-frame"></div>
    </div>
  </div>
</div>`,close:'<span class="popblocks-modal-sr">Close</span><svg viewBox="-6 -6 24 24" fill="currentColor"><path d="M7.314 5.9l3.535-3.536A1 1 0 1 0 9.435.95L5.899 4.485 2.364.95A1 1 0 1 0 .95 2.364l3.535 3.535L.95 9.435a1 1 0 1 0 1.414 1.414l3.535-3.535 3.536 3.535a1 1 0 1 0 1.414-1.414L7.314 5.899z"></path></svg>'}};static defaults(t){this.#t=y(!0,this.#t,t)}static construct(t,o){let i=u(t);return a(i,s=>{s.Modal||new e(s,o)}),i}constructor(t,o){if(t.Modal){console.warn("Modal: Instance already exists",t);return}let i={},s=t.dataset;try{i=JSON.parse(s.modalOptions||"{}")}catch{console.warn("Modal: Error parsing options JSON",t)}Object.assign(this,y(!0,this.constructor.#t,o||{},i)),this.el=t,this.guid=this.constructor.#o++,this.guidClass=`popblocks-modal-element-${this.guid}`,this.isOpen=!1,E(this.el,this.guidClass),f(this.el,"click",this.#e),t.Modal=this}destroy(){this.close(),A(this.el,this.guidClass),g(this.el,"click",this.#e),this.el.Modal=null,delete this.el.Modal}open(){this.isOpen||(this.hash=this.el.hash,this.targetEl=u(this.hash)[0],this.targetEl&&(this.listeners={close:this.#a(),container:this.#l(),keydown:this.#d()},this.#i(),this.#n(),setTimeout(()=>{E(this.modalEl,"popblocks-modal-open"),this.isOpen=!0,this.closeEl.focus(),k(window,"modal:open",{el:this.el})},10)))}close(){if(!this.isOpen)return;A(this.modalEl,"popblocks-modal-open"),this.#s(),g(window,"keydown",this.listeners.keydown),g(window,"modal:close",this.listeners.close);let t=o=>{C(o.target,"popblocks-modal")&&(this.targetEl.append(...this.frameEl.childNodes),g(this.modalEl,"transitionend",t),this.modalEl.remove(),this.isOpen=!1,this.el.focus(),k(window,"modal:close",{el:this.el}))};f(this.modalEl,"transitionend",t)}#i(){let t=this.templates.container.replace("[close]",this.templates.close);document.body.insertAdjacentHTML("beforeend",t),this.modalEl=u(".popblocks-modal")[0],this.overlayEl=u(".popblocks-modal-overlay",this.modalEl)[0],this.closeEl=u(".popblocks-modal-close",this.modalEl)[0],this.containerEl=u(".popblocks-modal-container",this.modalEl)[0],this.wrapEl=u(".popblocks-modal-wrap",this.modalEl)[0],this.frameEl=u(".popblocks-modal-frame",this.modalEl)[0],this.frameEl.append(...this.targetEl.childNodes),this.wrapEl.append(this.frameEl),E(this.modalEl,this.customClass),I(this.closeEl,"click",this.listeners.close),f(this.containerEl,"click",this.listeners.container),f(window,"keydown",this.listeners.keydown),f(window,"modal:close",this.listeners.close)}#n(){Q(v(this.modalEl),"aria-hidden","true","modal")}#s(){T(v(this.modalEl),"aria-hidden","modal")}#e(t){t.preventDefault(),t.stopPropagation(),this.Modal.open()}#l(){return t=>{t.target!==this.frameEl&&!this.frameEl.contains(t.target)?this.close():this.#r(t)}}#r(t){C(t.target,"popblocks-modal-trigger-close")&&this.close()}#a(){return t=>{this.close()}}#d(){return t=>{t.key==="Escape"&&this.close()}}},O=j;function _(e,t){typeof jQuery<"u"&&(jQuery.fn[t.toLowerCase()]=function(o,...i){return jQuery(this).each((s,n)=>{!o||b(o)?new e(n,o):n[t]&&w(n[t][o])&&n[t][o](...i)})})}function z(e,t){typeof jQuery<"u"&&(jQuery[t.toLowerCase()]=function(o,...i){if(w(e[o]))return e[o](...i)})}_(O,"Modal");z(O,"Modal");(function(e,t){t.PopBlocks={open:function(n){e('.popblocks-trigger[data-popblocks-id="'+n+'"]').modal("open")},close:function(){e(".popblocks-trigger").modal("close")}};function o(n,l,c,d){let r=parseInt(d.rules[0].value,10);console.log("Page Load: ",d.rules[0].value,r),setTimeout(function(){PopBlocks.open(l)},r*1e3)}function i(n,l){let c=0,d=l.rules[0].value,r;e(document).ready(function(){r=setInterval(h,1e3),e(this).mousemove(function(L){c=0}),e(this).keypress(function(L){c=0})});function h(){c++,c>d&&(PopBlocks.open(n),clearInterval(r))}}function s(n){let l=e(t),c=e("body"),d;c.on("mouseleave",r=>{d=r.clientY,d<0&&(console.log("Exit Intent"),l.trigger("exitintent"))}),l.on("exitintent",()=>{PopBlocks.open(n)})}e(document).ready(function(){let n=e(".popblocks-trigger");n.modal({returnFocus:!1}),n.each((l,c)=>{let d=e(c),r=d.data("popblocks-id"),h=d.data("popblocks-data");console.log(r,h),e.each(h.triggerGroups,(L,p)=>{p.rules[0].type=="page_load"&&o(d,r,h,p),p.rules[0].type=="idle_time"&&i(r,p),p.rules[0].type=="exit_intent"&&s(r)})})})})(jQuery,window);})();
//# sourceMappingURL=popup.js.map
